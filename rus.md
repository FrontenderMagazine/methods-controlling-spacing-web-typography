# Методы управления интервалами в веб-типографике

Если вы разрабатывали сайты в 2006, то работали с дизайнерами типа меня, которые не давали вам покоя, если шрифты в браузере *хоть немного* отличались от макета.

Тогда вы, возможно, пробовали объяснить мне всю боль кросс-браузерной совместимости или того, насколько по-своему разные браузеры рендерят шрифты. В ответ я, скорее всего, отправлял картинку, чтобы убедиться, что все выглядит одинаково во всех браузерах. Да, я был одним из тех дизайнеров.

Веб-шрифты прошли очень долгий путь с тех пор, и теперь у нас есть инструменты управления рендерингом в браузерах. Некоторые существуют уже давно. Я помню, как чуть не лопнул от восторга, когда нашел [FitText.js][1] и [Lettering.js][2].

Сегодня все еще существует множество ситуаций, в которых необходима настройка шрифтов, которая может обеспечить необходимую четкость, несмотря на все эти замечательные инструменты. В этой статье мы узнаем, как справиться с несколькими такими ситуациями.


## Использование правильного оформления для конкретного заголовка

Я часто так делаю, особенно если в дизайне используются сильно кастомизированные шрифты, которые отлично выглядят в целом, но могут смотреться нелепо в конкретном контексте.

Возьмем заголовок, набранный шрифтом [Abril Fatface][3] из Google Fonts:

![Скриншот][Заголовок шрифтом Abril Fatface]

Отличный шрифт! Однако, пара нюансов этого конкретного заголовка мне не нравится, особенно интервалы между некоторыми буквами, из за которых он кажется немного сжатым:

![Скриншот][Интервалы между некоторыми буквами Abril Fatface]

Вот где **кернинг** приходит на помощь! Кернинг буквально значит «интервал между буквами». Все файлы шрифтов, вне зависимости от того, знаем мы это или нет, содержат несколько степеней кернинга, и у нас есть CSS-свойство `font-kerning`, чтобы удалить их:
    
    .no-kern-please {
        font-kerning: none;
    }

    <h1 class="no-kern-please">Rubber Baby Buggy Bumpers</h1>

Мне кажется, это выглядит намного лучше, даже если на первый взгляд разница незначительна.

![Скриншот][Заголовок шрифтом Abril Fatface без кернинга]

<p data-height="196" data-theme-id="0" data-slug-hash="dOGRwg" data-default-tab="result" data-user="FMRobot" data-embed-version="2" data-pen-title="Пример управления кернингом" class="codepen">Посмотреть <a href="http://codepen.io/FMRobot/pen/dOGRwg/">пример управления кернингом</a>.</p>


### Десктоп

<table class="caniuse">
	<thead>
		<tr>
			<th>Google Chrome</th>
			<th>Mozilla Firefox</th>
			<th>Internet Explorer</th>
			<th>Opera</th>
			<th>Apple Safari</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td class="yes">29*</td>
			<td class="yes">34</td>
			<td class="no">No</td>
			<td class="yes">16*</td>
			<td class="yes">7*</td>
		</tr>
	</tbody>
</table>


### Мобильные и планшеты

<table class="caniuse">
	<thead>
		<tr>
			<th>iOS Safari</th>
			<th>Android</th>
			<th>Opera Mobile</th>
			<th>Android Chrome</th>
			<th>Android Firefox</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td class="yes">8*</td>
			<td class="yes">4.4*</td>
			<td class="yes">37</td>
			<td class="yes">53</td>
			<td class="yes">49</td>
		</tr>
	</tbody>
</table>


## Исправляем межбуквенное расстояние

Если вы хоть раз работали с веб-шрифтом, в котором интервал между символами слишком широкий или слишком узкий, тогда вы знаете, насколько это неприятно. Вот пример использования другого прекрасного шрифта из библиотеки Google Fonts, который называется [Dorsa][10]:

![Скриншот][Пример использования шрифта Dorsa]

Этот шрифт вполне подходит для заголовка, но можете ли вы представить чтение целого параграфа такого текста? Не весело.

![Скриншот][Тяжело читать]

*Это действительно тяжело читать!*

CSS-свойство `letter-spacing` может значительно измененить текст, если мы добавим пару пикселей между каждым символом:


	.spaced-out {
        letter-spacing: 2px;
    }


Мне бы не хотелось заходить так далеко и говорить, что это лучший шрифт для набора текста, но с дополнительными интервалами читать стало гораздо легче:

<p data-height="346" data-theme-id="0" data-slug-hash="VmeWKX" data-default-tab="result" data-user="FMRobot" data-embed-version="2" data-pen-title="Пример изменения межбуквенного интервала" class="codepen">Посмотреть <a href="http://codepen.io/FMRobot/pen/VmeWKX/">пример изменения межбуквенного интервала</a>.</p>


### Десктоп

<table class="caniuse">
	<thead>
		<tr>
			<th>Google Chrome</th>
			<th>Mozilla Firefox</th>
			<th>Internet Explorer</th>
			<th>Opera</th>
			<th>Apple Safari</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td class="maybe">4</td>
			<td class="yes">2</td>
			<td class="maybe">5.5</td>
			<td class="maybe">9</td>
			<td class="maybe">3.1</td>
		</tr>
	</tbody>
</table>


### Мобильные и планшеты

<table class="caniuse">
	<thead>
		<tr>
			<th>iOS Safari</th>
			<th>Android</th>
			<th>Opera Mobile</th>
			<th>Android Chrome</th>
			<th>Android Firefox</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td class="maybe">3.2</td>
			<td class="maybe">2.1</td>
			<td class="maybe">10</td>
			<td class="yes">53</td>
			<td class="yes">49</td>
		</tr>
	</tbody>
</table>


## Слишком большие или слишком маленькие интервалы между словами

Это частный случай предыдущего пункта, за исключением того, что интервалы находятся вокруг каждого слова, а не отдельного символа.

Здесь нам поможет прекрасное кросс-браузерное CSS-свойство [`word-spacing`][14]. Вот отрывок текста, набранный [Prompt web font][15], который шире большинства остальных шрифтов и может выглядеть неплохо, если использовать нижнее выравнивание.

<p data-height="265" data-theme-id="0" data-slug-hash="QGygNe" data-default-tab="result" data-user="FMRobot" data-embed-version="2" data-pen-title="QGygNe" class="codepen">Посмотреть <a href="http://codepen.io/FMRobot/pen/QGygNe/">пример изменения пробельных интервалов между словами</a>.</p>


## Несговорчивые интервалы между линиями

Не все высоты строк считаются равными. Например, одни шрифты выглядят больше чем другие, даже если для них установлено одно значение `font-size`.

<p data-height="265" data-theme-id="0" data-slug-hash="Nbxgqm" data-default-tab="result" data-user="FMRobot" data-embed-version="2" data-pen-title="Различия в интерлиньяже в зависимости от шрифта" class="codepen">Посмотреть пример <a href="http://codepen.io/FMRobot/pen/Nbxgqm/">Различия в интерлиньяже в зависимости от шрифта</a>.</p>

`font-size` задает блок, в пределах которого шрифту разрешено занимать место. Если мы установим `font-size` как `20px`, это создаст блок, занимающий `20px` вертикального пространства для каждого знака.

![Скриншот][Кегельная площадка]

Одни шрифты будут занимать больше места, чем другие, это одновременно создает и видимость того, что одни шрифты больше других, и ощущение большего или меньшего вертикального пространства между линиями.

Мы можем использовать свойство `line-height`, чтобы управлять этим вертикальным пространством. Базовая формула удобочитаемости `font-size * 1.5 = line-height` (или относительный `line-height: 1.5;` без единиц измерения), но это будет зависеть от используемого шрифта и от того, как он занимает вертикальное пространство. Сравните [molten leading][20].


## Четкость и разборчивость

Не все шрифты одинаковы в различных операционных системах. Это происходит потому, что в каждой операционной системе, будь то Windows, MacOS или любая другая, разные процессы управляют тем, сколько пикселей используется для отображения шрифтов.

Многим из нас, веб-дизайнеров, не нравится завистеть от интерпретации наших типографических решений системой.

![Скриншот][Сглаживание в разных операционных системах]

В нашем распоряжении несколько CSS-свойств, которые помогают увеличить
видимое разрешение того, как шрифты отображаются в разных системах. Этот процесс наиболее известен как **субпиксельное сглаживание**, потому что это инструкция для браузера «попытаться заполнить недостающие пиксели там, где они могут существовать».

Нет недостатка в спорах о том, допустимо ли играть с субпиксельным сглаживанием. Несмотря на то, что несколько лет назад Дмитрий Фадеев [резюмируя его аргументы][22] красиво высказался против этой практики.

> Режим сглаживания — это не «фикс» для субпиксельного рендеринга, а ловушка в
> большинстве случаев. Субпиксельный рендеринг технически лучше, чище и более
> читабельный, чем сглаживание, потому что использует каждый субпиксель и
> увеличивает его эффективное разрешение, использующееся для сглаживания
> шрифта, в три раза.
> Сглаживание более полезно в конкретных обстоятельствах, например, для
> светлого текста на темном фоне, но он не заменяет субпиксельное
> сглаживание и не является «фиксом».

Но давайте скажем, что мы хотим делать это все равно. CSS дает нам конкретный уровень контроля над четкостью и разборчивостью через использование [`font-smooth`][23] для заполнения того, что пропустила операционная система.

Значения `font-smooth` включают:

 * `auto`: Позволяет браузеру выбирать лучший вариант заполнения пикселей в шрифте.
 * `never`: Отключает системное автосглаживание. Шрифт отображается как есть, со всеми неровными краями.
 * `always`: Заставляет браузер всегда добавлять пиксели в шрифт, если он видит возможность.


* **Примечание:** Свойство `font-smooth` считается неофициальным на момент написания статьи и не рекомендуется для использования на продакшен-версии сайта. Есть вендорные префиксы для WebKit и Mozilla, хотя и без стандартной имплементации.*

Учитывая примечание, вендорные префиксы можно использовать с их собственными значениями:

### -webkit-font-smoothing

* `none`: Отключает сглаживание в Webkit-браузерах.
* `antialiased`: Сглаживает шрифт на том же уровне, что уже обеспечивется системой
* `subpixel-antialiased`: Сглаживает шрифт на микроуровне для обеспечения максимальной остроты текста, в частности, на экранах с высоким разрешением.


### -moz-osx-font-smoothing

*   `auto`: Позволяет браузеру решать, где оптимизировать сглаживание.
*   `inherit`: Принимает значение родительского элемента.
*   `unset`: то же, что и `none` для WebKit.
*   `grayscale`: то же, что и `antialiased` для WebKit.

### Desktop

<table class="caniuse">
	<thead>
		<tr>
			<th>Google Chrome</th>
			<th>Mozilla Firefox</th>
			<th>Internet Explorer</th>
			<th>Opera</th>
			<th>Apple Safari</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td class="maybe">5*</td>
			<td class="maybe">25*</td>
			<td class="no">No</td>
			<td class="maybe">15*</td>
			<td class="maybe">4*</td>
		</tr>
	</tbody>
</table>


### Мобильные и планшеты

<table class="caniuse">
	<thead>
		<tr>
			<th>iOS Safari</th>
			<th>Android</th>
			<th>Opera Mobile</th>
			<th>Android Chrome</th>
			<th>Android Firefox</th>
		</tr>
	</thead>
	<tbody>
		<tr>
			<td class="no">No</td>
			<td class="no">No</td>
			<td class="no">No</td>
			<td class="no">No</td>
			<td class="no">No</td>
		</tr>
	</tbody>
</table>


## О, подождите, вы используете SVG?!

У SVG есть свой собственный уровень поддержки техник, о которых мы рассказывали в этой статье. У нас есть кернинг (не очень много) и обычные свойства letter-spacing (межбуквенное расстояние) и word-spacing (расстояние между словами). Интересно, что у нас также есть атрибут `textLength`, который может использоваться для явного задания того, как широко текст может рендериться, и он растягивает или сжимает текст, чтобы вместить его. Атрибут `lengthAdjust` контролирует рендеринг символов или глифов (например, пунктуации) тоже.

<p data-height="265" data-theme-id="0" data-slug-hash="ObMgPa" data-default-tab="html,result" data-user="FMRobot" data-embed-version="2" data-pen-title="Межбуквенные расстояния в SVG" class="codepen">Посмотреть пример различных <a href="http://codepen.io/FMRobot/pen/ObMgPa/">межбуквенных расстояний в SVG</a>.</p>


## В заключении

Типографика в вебе — это сложно! Да, мы можем контролировать то, как разные символы отображаются, отрисовываются и позиционируются на экране. Но с великой силой приходит великая отвественность. Теперь в вашем распоряжении есть по меньшей мере несколько приемов, как отвечать веб-дизайнерам, которые зациклены на точности типографического дизайна в браузере.

<style>
	.caniuse td,
	.caniuse th {
		padding: .5rem;
		width: 20%;
		box-sizing: border-box;
	}
	table.caniuse tbody tr:hover td.no,
	td.no {
		box-shadow: none;
		background-color: rgba(255,0,0,.25);
	}
	table.caniuse tbody tr:hover td.yes,
	td.yes {
		box-shadow: none;
		background-color: rgba(0,255,0,.25);
	}
	table.caniuse tbody tr:hover td.maybe,
	td.maybe {
		box-shadow: none;
		background-color: rgba(255,127,0,.25);
	}
</style>


 [1]: http://fittextjs.com/
 [2]: http://letteringjs.com/
 [3]: https://fonts.google.com/specimen/Abril+Fatface
 [5]: img/letter-spacing-figure2-1024x225.jpg%201024w
 [6]: img/letter-spacing-figure3-1024x225.jpg%201024w
 [7]: http://codepen.io/team/css-tricks/pen/PGpOkd/
 [8]: http://codepen.io/css-tricks
 [9]: http://codepen.io
 [10]: https://fonts.google.com/specimen/Dorsa?selection.family=Dorsa
 [11]: img/letter-spacing-figure4-1024x230.png%201024w
 [12]: img/letter-spacing-figure5-1024x198.png%201024w
 [13]: http://codepen.io/team/css-tricks/pen/zKkPqK/
 [14]: https://css-tricks.com/almanac/properties/w/word-spacing/
 [15]: https://fonts.google.com/specimen/Prompt?selection.family=Prompt
 [16]: http://codepen.io/geoffgraham/pen/GjJaaE/
 [17]: http://codepen.io/geoffgraham
 [18]: http://codepen.io/team/css-tricks/pen/BLWmzv/
 [19]: img/letter-spacing-figure6-1024x270.png%201024w
 [20]: https://css-tricks.com/molten-leading-css/
 [21]: img/letter-spacing-figure7-300x48.png%20300w
 [22]: http://usabilitypost.com/2012/11/05/stop-fixing-font-smoothing/
 [23]: https://www.w3.org/TR/WD-font/#font-smooth
 [24]: http://codepen.io/team/css-tricks/pen/KgWyXw/

[Заголовок шрифтом Abril Fatface]: img/letter-spacing-figure2a.png "Заголовок шрифтом Abril Fatface"
[Интервалы между некоторыми буквами Abril Fatface]: img/letter-spacing-figure2.jpg "Интервалы между некоторыми буквами Abril Fatface"
[Заголовок шрифтом Abril Fatface без кернинга]: img/letter-spacing-figure3.jpg "Заголовок шрифтом Abril Fatface без кернинга"
[Пример использования шрифта Dorsa]: img/letter-spacing-figure4.png "Пример использования шрифта Dorsa"
[Тяжело читать]: img/letter-spacing-figure5.png "Тяжело читать"
[Кегельная площадка]: img/letter-spacing-figure6.png "Кегельная площадка"
[Сглаживание в разных операционных системах]: img/letter-spacing-figure7.png "Сглаживание в разных операционных системах"

